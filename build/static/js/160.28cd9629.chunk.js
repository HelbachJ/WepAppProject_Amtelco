"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[160],{160:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var i=n(791),c=n(271),s=n(995),a=n(853),r=n(508),o=n(32),d=n(890),l=n(523),p="AppointmentItem_item__WjRDy",u=n(184),m=function(e){var t=(0,i.useState)([]),n=(0,d.Z)(t,2),m=n[0],f=n[1],h=(0,c.k6)(),x=(0,c.TH)(),j=Date().toLocaleString();localStorage.setItem("timeStamp",j);var g=(0,s.Z)(a.fK).status;(0,i.useEffect)((function(){"completed"===g&&h.replace("/appointments/".concat(e.localId))}),[g,h,e.localId]),(0,i.useEffect)((function(){console.log("RENDERING APPOINTMENTS",m)}),[m]);var _=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),h.push({pathname:x.pathname}),t.next=4,fetch("https://webapp-appointments-default-rtdb.firebaseio.com/appointments/".concat(e.localId,"/").concat(e.id,".json"),{method:"DELETE"}).then((function(t){f((function(t){return t.filter((function(t){return t.id!==e.id}))}))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,u.jsx)("div",{children:(0,u.jsxs)("li",{className:p,children:[(0,u.jsxs)("figure",{children:[(0,u.jsxs)("figcaption",{children:["User Id: ",e.localId]}),(0,u.jsxs)("time",{children:[e.timeStamp," ",e.updatedTime," "]}),(0,u.jsxs)("blockquote",{children:[(0,u.jsx)("p",{children:e.date}),(0,u.jsx)("p",{children:e.startTime+" - "+e.endTime})]}),(0,u.jsx)("figcaption",{children:e.name}),(0,u.jsx)("figcaption",{children:e.description})]}),(0,u.jsx)("button",{children:(0,u.jsx)(l.rU,{className:"btn",to:"/appointment/".concat(e.localId,"/").concat(e.id),children:"edit"})}),(0,u.jsx)("button",{className:"btn",onClick:_,children:"delete"})]})})},f="AppointmentList_list__Boyws",h="AppointmentList_sorting__-At9z",x=function(e){var t,n,s=(0,c.k6)(),a=(0,c.TH)(),r="asc"===new URLSearchParams(a.search).get("sort"),o=(t=e.appointments,n=r,t.sort((function(e,t){return n?e.id>t.id?1:-1:e.id<t.id?1:-1})));return(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)("div",{className:h,children:(0,u.jsxs)("button",{onClick:function(){s.push({pathname:a.pathname,search:"?sort=".concat(r?"desc":"asc")})},children:["Sort ",r?"Descending":"Ascending"]})}),(0,u.jsx)("ul",{className:f,children:o.map((function(e){return(0,u.jsx)(m,{localId:e.localId,id:e.id,name:e.name,date:e.date,startTime:e.startTime,endTime:e.endTime,description:e.description,timeStamp:e.timeStamp,updatedTime:e.updatedTime},e.id)}))})]})},j=n(556),g="NoAppointmentsFound_noquotes__xP4i0",_=n(654),v=function(e){var t=(0,i.useContext)(_.Z);return(0,u.jsxs)("div",{className:g,children:[(0,u.jsx)("p",{children:"No Appointments found!"}),(0,u.jsx)(l.rU,{className:"btn",to:"/newAppointment/".concat(t.localId),children:"Add an Appointment"})]})};var I=function(e){var t=(0,i.useContext)(_.Z),n=(0,c.UO)().userId,r=(0,s.Z)(a.$U,!0),o=r.sendRequest,d=r.status,l=r.data,p=r.error;return(0,i.useEffect)((function(){o(n)}),[o,n]),"pending"===d?(0,u.jsx)("div",{className:"centered",children:(0,u.jsx)(j.Z,{})}):p?(0,u.jsx)("p",{className:"centered focused",children:p}):"completed"!==d||l&&0!==l.length?(0,u.jsx)(x,{appointments:l,uid:t.localId}):(0,u.jsx)(v,{})}}}]);
//# sourceMappingURL=160.28cd9629.chunk.js.map